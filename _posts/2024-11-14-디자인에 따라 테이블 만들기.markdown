---
layout: post
title: "[241114] 디자인에 따라 테이블 만들기"
date: 2024-11-14 00:00:00 +0900
categories: memo
---

### 디자인에 따라 테이블 만들기

![스크린샷 2024-11-15 오후 4.59.10.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d2d0348d-b394-49c9-b6fe-f9ad02f7f098/2046faae-703b-45a0-aeeb-a970d1b7416f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-11-15_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.59.10.png)

태초에 이런 디자인이 있었다.

- **구현해야하는 내용**
  1. 메인 카테고리에 서브 카테고리가 렌더링되도록 하기 (단, 메인 카테고리가 없는 경우도 있다)
  2. 제목4 칼럼에 해당하는 셀은 리스트로 이루어져있어서 열고 닫았다 해야함

1. **메인 카테고리에 서브 카테고리가 렌더링되도록 하기 (rowSpan, colSpan 사용)**

   - 메인 카테고리는 묶는 용도로만 있기 때문에 사실상 한 row를 차지하는 건 서브 카테고리
   - 메인 카테고리가 존재할 때에는 서브 카테고리가 colSpan을 1만 차지하도록 했고, 메인 카테고리가 없는 경우에는 colSpan을 2 차지하도록 했다

   ```jsx
   //서브 카테고리
   <TableCell colSpan={parentCategory ? 1 : 2}>{data.label}</TableCell>
   ```

   - 메인 카테고리가 존재할 경우 메인 카테고리는 서브 카테고리 개수만큼의 row를 차지해야 하기 때문에 rowSpan에 서브 카테고리 길이를 넣어줬다 (없을 경우 한 줄만 차지하면 되므로 1)

   ```jsx
   //메인 카테고리
   <TableCell rowSpan={category?.length ?? 1}>{parentCategory}</TableCell>
   ```

1. **제목4 칼럼에 해당하는 셀은 리스트로 이루어져있어서 열고 닫았다 해야한다.**

여기엔 그냥 리스트라고 적었지만 실제 디자인은 리스트 요소 하나하나가 셀처럼 그려져 있어서 사실상 열을 열었다 닫았다 하는 UI 였다.

멋있게 만들고 싶어서 리스트 요소 하나하나를 한 row로 처리하고 열릴 때마다 해당 리스트의 개수만큼 다른 col들의 rowSpan을 조정하는 코드를 넣었었다.

더미데이터로 작업할 땐 그럴듯 해보였으나 api 연결하고 데이터 주입하자마자 테이블이 와장창 무너지는 모습을 보며 쉬운 길로 가기로 했다

- 닫혔다 열렸다 하는 리스트 그리기
  - useState로 서브 카테고리 크기 만큼의 false로 채워진 배열을 만든다. (변수명:openSub)
    - 원래는 Set을 사용해서 Set.has로 해결 하려 했는데 리렌더링이 일어나지 않아서 useState로 바꿨다.
  - 서브 카테고리의 열림 버튼을 누르면 openSub을 업데이트 해 해당 카테고리의 idx에 해당하는 배열 값을 true로 바꿔준다.
  - openSub[idx]의 값이 true인 애들은 리스트가 보이도록 그려준다 끗
